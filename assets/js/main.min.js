!function(e){"use strict";e(document).ready(function(){e(".variations_form").on("click",".variation-swatches-container .swatch",function(t){t.preventDefault();var a=e(this),o=a.data("value"),s=e('select[name="attribute_pa_color"]');!a.hasClass("selected")&&s.length>0&&(s.val(o).trigger("change"),a.siblings(".swatch").removeClass("selected"),a.addClass("selected"))}),e(".variations_form").on("woocommerce_update_variation_nav",function(){var t=e('select[name="attribute_pa_color"]').val();t&&(e(".variation-swatches-container .swatch").removeClass("selected"),e('.variation-swatches-container .swatch[data-value="'+t+'"]').addClass("selected"))});let t=e("#back-to-top");e(window).on("scroll",function(){e(this).scrollTop()>300?t.addClass("show"):t.removeClass("show")}),t.on("click",function(t){t.preventDefault(),e("html, body").animate({scrollTop:0},500)}),e(".variations_form").on("click",".size-swatch",function(t){t.preventDefault();var a=e(this).data("value"),o=e('select[name="attribute_pa_size"]');o.length&&(o.val(a).trigger("change"),e(this).siblings(".size-swatch").removeClass("selected"),e(this).addClass("selected"))}),e(document.body).on("added_to_cart",function(t,a){var o=e(a).closest(".product-card").find(".woocommerce-loop-product__title").text()||"تمت إضافة المنتج للسلة!",s=e("#notification");s.text(o).addClass("show"),setTimeout(function(){s.removeClass("show")},2600)}),e("body").on("click",".quick-view-btn",function(t){t.preventDefault();var a=e(this).data("product-id"),o=e("#quick-view-modal-wrapper"),s=e("#quick-view-content");s.html("<p>جاري التحميل...</p>"),o.show(),e.ajax({url:alam_anika_ajax.ajax_url,type:"POST",data:{action:"load_product_quick_view",product_id:a},success:function(t){s.html(t),e(document.body).trigger("wc_variation_form"),s.find(".woocommerce-product-gallery").each(function(){e(this).wc_product_gallery()})},error:function(){s.html("<p>حدث خطأ، يرجى المحاولة مرة أخرى.</p>")}})}),e("body").on("click",".modal-overlay, .modal-close",function(t){t.preventDefault(),e("#quick-view-modal-wrapper").hide()})});var t,a=e(".search-form .search-field"),o=e("#live-search-results");function s(){var t=a.val();if(t.length<3){o.hide().html("");return}o.html('<div class="loading-results">جاري البحث...</div>').show(),e.ajax({url:alam_anika_ajax.ajax_url,type:"POST",data:{action:"live_product_search",query:t},success:function(e){o.html(e).show()}})}a.on("keyup",function(){clearTimeout(t),t=setTimeout(s,300)}),a.on("keydown",function(){clearTimeout(t)}),e(document).on("click",function(t){e(t.target).closest(".search-container").length||o.hide()}),jQuery(document).ready(function(e){let t=document.querySelectorAll(".animate-on-scroll");if("IntersectionObserver"in window){let a=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("is-visible"),a.unobserve(e.target))})},{threshold:.1});t.forEach(e=>{a.observe(e)})}else t.forEach(e=>{e.classList.add("is-visible")})})}(jQuery);
