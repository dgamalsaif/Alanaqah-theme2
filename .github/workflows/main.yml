 name: Check Existing Color Swatches Code

on:
  workflow_dispatch

jobs:
  check-existing-code:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    
    - name: Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø£Ù†Ù…Ø§Ø· Color Swatches ÙÙŠ CSS
      run: |
        echo "ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø£Ù†Ù…Ø§Ø· Color Swatches ÙÙŠ Ù…Ù„ÙØ§Øª CSS..."
        
        # Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø¬Ù…ÙŠØ¹ Ù…Ù„ÙØ§Øª CSS
        CSS_FILES=$(find . -name "*.css" -not -path "./.github/*")
        
        for css_file in $CSS_FILES; do
            echo "ğŸ“ ÙØ­Øµ Ù…Ù„Ù: $css_file"
            
            # Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø£Ù†Ù…Ø§Ø· swatches
            if grep -q -i "color-swatch\|swatch\|color.*circle" "$css_file"; then
                echo "ğŸ¨ found color swatch styles in: $css_file"
                grep -n -i "color-swatch\|swatch\|color.*circle" "$css_file" | head -5
                echo "---"
            fi
            
            # Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø£Ù„ÙˆØ§Ù† Ù…Ø­Ø¯Ø¯Ø©
            if grep -q -i "#ff2b4d\|#e0e0e0\|#f5a623" "$css_file"; then
                echo "ğŸ¯ found specific colors in: $css_file"
                grep -n -i "#ff2b4d\|#e0e0e0\|#f5a623" "$css_file" | head -3
                echo "---"
            fi
        done
        
        if [ -z "$CSS_FILES" ]; then
            echo "âšª Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£ÙŠ Ù…Ù„ÙØ§Øª CSS"
        fi

    - name: Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ÙƒÙˆØ¯ Color Swatches ÙÙŠ JavaScript
      run: |
        echo "ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ÙƒÙˆØ¯ Color Swatches ÙÙŠ Ù…Ù„ÙØ§Øª JS..."
        
        # Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø¬Ù…ÙŠØ¹ Ù…Ù„ÙØ§Øª JavaScript
        JS_FILES=$(find . -name "*.js" -not -path "./.github/*" -not -path "./assets/js/vendor/*")
        
        for js_file in $JS_FILES; do
            echo "ğŸ“ ÙØ­Øµ Ù…Ù„Ù: $js_file"
            
            # Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ÙƒÙˆØ¯ swatches
            if grep -q -i "swatch\|color.*click\|attribute.*select" "$js_file"; then
                echo "âš¡ found swatch-related code in: $js_file"
                grep -n -i "swatch\|color.*click\|attribute.*select" "$js_file" | head -5
                echo "---"
            fi
            
            # Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø£Ø­Ø¯Ø§Ø« variation
            if grep -q -i "variation\|woocommerce.*change" "$js_file"; then
                echo "ğŸ›’ found variation code in: $js_file"
                grep -n -i "variation\|woocommerce.*change" "$js_file" | head -3
                echo "---"
            fi
        done
        
        if [ -z "$JS_FILES" ]; then
            echo "âšª Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£ÙŠ Ù…Ù„ÙØ§Øª JS"
        fi

    - name: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ø¬Ù„Ø¯ add-to-cart
      run: |
        echo "ğŸ“ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù‡ÙŠÙƒÙ„ woocommerce..."
        
        if [ -d "woocommerce/single-product/add-to-cart" ]; then
            echo "âœ… Ù…Ø¬Ù„Ø¯ add-to-cart Ù…ÙˆØ¬ÙˆØ¯"
            find "woocommerce/single-product/add-to-cart" -name "*.php" | while read file; do
                echo "ğŸ“„ Ù…Ù„Ù Ù…ÙˆØ¬ÙˆØ¯: $file"
                if grep -q -i "variation\|color\|swatch" "$file"; then
                    echo "ğŸ¨ found swatch-related code in: $file"
                    grep -n -i "variation\|color\|swatch" "$file" | head -3
                fi
            done
        else
            echo "âšª Ù…Ø¬Ù„Ø¯ add-to-cart ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯"
            echo "ğŸ“‹ Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ù€ woocommerce:"
            find "woocommerce" -type f -name "*.php" | head -10
        fi

    - name: ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù†ØªØ§Ø¦Ø¬
      run: |
        echo "ğŸ“Š ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Color Swatches:"
        echo "=========================================="
        echo "âœ… ØªÙ… ÙØ­Øµ Ø¬Ù…ÙŠØ¹ Ù…Ù„ÙØ§Øª CSS Ùˆ JS Ø°Ø§Øª Ø§Ù„ØµÙ„Ø©"
        echo "ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø£Ù†Ù…Ø§Ø·: color-swatch, swatch, variation"
        echo "ğŸ“ ØªÙ… ÙØ­Øµ Ù‡ÙŠÙƒÙ„ Ù…Ø¬Ù„Ø¯Ø§Øª woocommerce"
        echo "=========================================="
        echo "ğŸ“‹ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© Ø¨Ù†Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ù†ØªØ§Ø¦Ø¬:"
        echo "1. Ø¥Ø°Ø§ ÙˆØ¬Ø¯Øª Ø§Ù„Ø£ÙƒÙˆØ§Ø¯: Ø³ÙŠØªÙ… ØªØ­Ø³ÙŠÙ†Ù‡Ø§ ÙˆØªØ·ÙˆÙŠØ±Ù‡Ø§"
        echo "2. Ø¥Ø°Ø§ Ù„Ù… ØªÙˆØ¬Ø¯: Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­"
        echo "3. Ø³ÙŠÙƒÙˆÙ† Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø§Ù„Ø¯Ù…Ø¬ Ù…Ø¹ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ"
